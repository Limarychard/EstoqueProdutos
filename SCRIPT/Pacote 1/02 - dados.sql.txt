SELECT * FROM NOVA_CLIENTES

ALTER TABLE CLIENTES DROP CONSTRAINT FK_Usuario;

CREATE TABLE NOVA_CLIENTES(
    ID_CLIENTE INT PRIMARY KEY IDENTITY(1,1),
    NOME_CLIENTE NVARCHAR(255) NOT NULL,    
    TELEFONE BIGINT NOT NULL,                
    CPF_CNPJ BIGINT NULL,                    
    CEP INT NOT NULL,       
	ESTADO NVARCHAR(2) NOT NULL,
	CIDADE NVARCHAR(255) NOT NULL,
	BAIRRO NVARCHAR(255) NOT NULL,
    RUA NVARCHAR(255) NOT NULL,             
    NUMERO_ENDERECO NVARCHAR(50) NOT NULL,   
    TEM_COMPLEMENTO BIT NOT NULL,            
    COMPLEMENTO NVARCHAR(255),      
    CASA_APTO BIT NOT NULL,                  
    BOM_PAGADOR BIT NOT NULL,                
    DT_ULT_COMPRA DATETIME NULL,             
    DT_ALT DATETIME NOT NULL DEFAULT GETDATE(), 
    DT_INC DATETIME NOT NULL DEFAULT GETDATE(), 
    ID_USUARIO INT NOT NULL,                 
    CONSTRAINT FK_Usuario FOREIGN KEY (ID_USUARIO) REFERENCES Usuarios (ID)
);

SET IDENTITY_INSERT NOVA_CLIENTES ON;

INSERT INTO NOVA_CLIENTES (ID_CLIENTE, NOME_CLIENTE, TELEFONE, CPF_CNPJ, CEP, ESTADO, CIDADE, BAIRRO, RUA, NUMERO_ENDERECO, TEM_COMPLEMENTO, COMPLEMENTO, CASA_APTO, BOM_PAGADOR, DT_ULT_COMPRA, DT_ALT, DT_INC, ID_USUARIO)
SELECT Id, Nome, Telefone, CPF, 01234567, 'SP', 'SAO PAULO', 'BAIRRO', 'RUA', 111, 0, 'COMPLEMENTO', 0, 0, DtUltCompra, DtAlt, DtInc, UsuarioId
FROM Clientes;

ALTER TABLE Vendas DROP CONSTRAINT FK_Vendas_Clientes;

ALTER TABLE Clientes DROP CONSTRAINT FK_Clientes_Usuarios;
ALTER TABLE Clientes DROP CONSTRAINT PK__Clientes__3214EC074B513B58;

DROP TABLE Clientes

EXEC sp_rename 'NOVA_CLIENTES', 'CLIENTES';

ALTER TABLE Vendas
ADD CONSTRAINT FK_Vendas_Clientes FOREIGN KEY (ClienteId) REFERENCES Clientes(ID_CLIENTE);

GO


ALTER TABLE VENDAS
ALTER COLUMN VALOR NUMERIC;

ALTER TABLE PRODUTOS
ALTER COLUMN VALOR_DE_VENDA NUMERIC;

ALTER TABLE [dbo].[PRODUTOS] DROP CONSTRAINT [DF__PRODUTOS__VALOR___40F9A68C]
GO

ALTER TABLE PRODUTOS
ALTER COLUMN VALOR_DE_CUSTO NUMERIC;

ALTER TABLE [dbo].[PRODUTOS] ADD  DEFAULT ((0)) FOR [VALOR_DE_CUSTO]
GO

ALTER TABLE PRODUTOVENDA
ALTER COLUMN VALORPRODUTO NUMERIC;

GO